"use strict";(self.webpackChunkbesmartxim_admin=self.webpackChunkbesmartxim_admin||[]).push([[822],{6213:function(e,a,r){r(2791);a.Z=r.p+"static/media/delete.05b230552eb58580f2754dfb05a1bd04.svg"},741:function(e,a,r){r(2791);a.Z=r.p+"static/media/pencil-square.75d078b547e1c0688445b9e47edfd1b9.svg"},8218:function(e,a,r){var i=r(1243),s=r(4800),t=i.Z.create({baseURL:s.Vu});t.interceptors.request.use((function(e){var a=sessionStorage.getItem("userId");return e.headers.accessedBy=a||1,e}),(function(e){return Promise.reject(e)})),t.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e.response)})),a.Z=t},5082:function(e,a,r){var i=r(885),s=r(2791),t=r(8218),n=r(6758),l=r(5705),c=r(6836),o=r(1830),d=r.n(o),m=r(184),u=c.Ry().shape({firstname:c.Z_().required("Please enter first name"),lastname:c.Z_().required("Please enter last name"),email:c.Z_().email().required("Please enter valid email address"),mobile:c.Z_().required("Please enter valid mobile no"),companyName:c.Z_().required("This field is required"),isActive:c.Z_().required("This field is required"),password:c.Z_().required("This field is required"),referredBy:c.Z_().required("This field is required")});a.Z=function(e){var a={firstname:e.rowData.firstname,lastname:e.rowData.lastname,mobile:e.rowData.mobile,email:e.rowData.email,companyName:e.rowData.companyName,isActive:e.rowData.isActive,password:e.rowData.password,referredBy:e.rowData.memberId};console.log("props.rowData.referredBy",e.rowData.memberId),console.log("initialValues",a);var r=(0,s.useState)([]),c=(0,i.Z)(r,2),o=(c[0],c[1],(0,s.useState)([])),h=(0,i.Z)(o,2),f=(h[0],h[1]),p=(0,s.useState)([]),x=(0,i.Z)(p,2),b=x[0],v=x[1];(0,s.useEffect)((function(){(0,t.Z)({method:"GET",url:"masterdata-management/subscription/list"}).then((function(e){f(e.data.subscriptionList)})).catch((function(e){f([])}))}),[]);return(0,s.useEffect)((function(){(0,t.Z)({method:"GET",url:"masterdata-management/team-member/list"}).then((function(e){var a;v((null===(a=e.data.temMemberList)||void 0===a?void 0:a.length)>0?e.data.temMemberList:[])})).catch((function(e){v([])}))}),[]),(0,m.jsx)("div",{children:(0,m.jsx)(l.J9,{initialValues:a,validationSchema:u,onSubmit:function(a){var r={firstname:a.firstname,lastname:a.lastname,email:a.email,mobile:a.mobile,companyName:a.companyName,isActive:a.isActive,password:a.password,memberId:a.referredBy};(0,n.Z)({method:"PUT",url:"user-management/user/".concat(e.rowData.id),data:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(a){console.log("user",a.data),d().fire({title:"Thank You",text:"User update is successful",icon:"success"}).then((function(){e.modalSubmit()}))})).catch((function(e){console.log("Err",e);var a="Somethhing went wrong, please try again.";e.data.errorMsg&&(a=e.data.errorMsg),d().fire({title:"Oops!",text:a,icon:"error"})}))},children:function(a){a.values;var r=a.errors,i=a.setFieldValue,s=(a.setFieldError,a.touched);a.isValid,a.handleSubmit,a.submitForm;return(0,m.jsxs)(l.l0,{children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:(0,m.jsx)("b",{children:"First Name"})}),(0,m.jsx)(l.gN,{name:"firstname",type:"text",className:"form-control ".concat(s.firstname&&r.firstname?"is-invalid":""),placeholder:"First Name",onChange:function(e){i("firstname",e.target.value)}}),s.firstname&&r.firstname&&(0,m.jsx)("p",{className:"error",children:r.firstname})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:(0,m.jsx)("b",{children:"Last Name"})}),(0,m.jsx)(l.gN,{name:"lastname",type:"text",className:"form-control ".concat(s.lastname&&r.lastname?"is-invalid":""),placeholder:"Last Name",onChange:function(e){i("lastname",e.target.value)}}),s.lastname&&r.lastname&&(0,m.jsx)("p",{className:"error",children:r.lastname})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:(0,m.jsx)("b",{children:"Email"})}),(0,m.jsx)(l.gN,{name:"email",type:"text",className:"form-control ".concat(s.email&&r.email?"is-invalid":""),placeholder:"Email Address",onChange:function(e){i("email",e.target.value)}}),s.email&&r.email&&(0,m.jsx)("p",{className:"error",children:r.email})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:(0,m.jsx)("b",{children:"Mobile"})}),(0,m.jsx)(l.gN,{name:"mobile",type:"text",className:"form-control ".concat(s.mobile&&r.mobile?"is-invalid":""),placeholder:"Mobile No",onChange:function(e){i("mobile",e.target.value)}}),s.mobile&&r.mobile&&(0,m.jsx)("p",{className:"error",children:r.mobile})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:(0,m.jsx)("b",{children:"Password"})}),(0,m.jsx)(l.gN,{name:"password",type:"password",className:"form-control ".concat(s.password&&r.password?"is-invalid":""),placeholder:"Password",onChange:function(e){i("password",e.target.value)}}),s.password&&r.password&&(0,m.jsx)("p",{className:"error",children:r.password})]}),0==e.isAdmin?(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:(0,m.jsx)("b",{children:"Company Name"})}),(0,m.jsx)(l.gN,{name:"companyName",type:"text",className:"form-control ".concat(s.companyName&&r.companyName?"is-invalid":""),placeholder:"Company Name",onChange:function(e){i("companyName",e.target.value)}}),s.companyName&&r.companyName&&(0,m.jsx)("p",{className:"error",children:r.companyName})]}):null,(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:(0,m.jsx)("b",{children:"Status"})}),(0,m.jsxs)(l.gN,{name:"isActive",component:"select",className:"form-control ".concat(s.companyName&&r.companyName?"is-invalid":""),autoComplete:"off",onChange:function(e){i("isActive",e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"Please Select"}),(0,m.jsx)("option",{value:"Y",children:"Active"}),(0,m.jsx)("option",{value:"N",children:"Inactive"}),s.isActive&&r.isActive&&(0,m.jsx)("p",{className:"error",children:r.isActive})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:(0,m.jsx)("b",{children:"Referred By"})}),(0,m.jsxs)(l.gN,{name:"referredBy",component:"select",className:"form-control ".concat(s.referredBy&&r.referredBy?"is-invalid":""),autoComplete:"off",onChange:function(e){i("referredBy",e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"Please Select"}),b.map((function(e,a){return(0,m.jsx)("option",{value:e.id,children:"".concat(e.firstName," ").concat(e.lastName)},a)}))]}),s.referredBy&&r.referredBy&&(0,m.jsx)("p",{className:"error",children:r.referredBy})]}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update User"})]})}})})}},1822:function(e,a,r){r.r(a),r.d(a,{default:function(){return v}});var i=r(885),s=r(2791),t=r(6758),n=r(741),l=r(6213);var c=r.p+"static/media/subscribe.318f4e6d375ab0825569679ef5c79f13.svg",o=r(1830),d=r.n(o),m=r(5082),u=r(8861),h=r(212),f=r(4880),p=r(2426),x=r.n(p),b=r(184),v=function(){var e=(0,s.useState)([]),a=(0,i.Z)(e,2),r=a[0],o=a[1],p=(0,s.useState)(!1),v=(0,i.Z)(p,2),j=v[0],g=v[1],N=(0,s.useState)([]),y=(0,i.Z)(N,2),w=y[0],S=y[1],Z=(0,s.useState)(void 0),A=(0,i.Z)(Z,2),C=A[0],D=A[1],Y=(0,s.useState)(void 0),E=(0,i.Z)(Y,2),F=E[0],q=E[1],B=(0,s.useState)("All"),M=(0,i.Z)(B,2),T=M[0],U=M[1],k=(0,s.useState)([]),P=(0,i.Z)(k,2),I=(P[0],P[1]),L=(0,f.k6)();(0,s.useEffect)((function(){_()}),[]),(0,s.useEffect)((function(){I(r)}),[r]);var _=function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"All";"All"===a?e="/user-management/user/list?userType=USER":"Expired"===a?e="/user-management/user/list?userType=USER&isExpired=Y":"Active"===a?e="/user-management/user/list?userType=USER&isActive=Y":"Inactive"===a&&(e="/user-management/user/list?userType=USER&isActive=N"),(0,t.Z)({method:"GET",url:e}).then((function(e){o(e.data.userList),I(e.data.userList)})).catch((function(e){console.log("Err",e)}))},R=function(e){S(e),g(!0)},O=function(e){d().fire({title:"Delete User",text:"Are you sure you want to Delete User?",icon:"error",dangerMode:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((function(a){if(a.value){(0,t.Z)({method:"PUT",url:"user-management/user/".concat(e.id),data:JSON.stringify({isDelete:"Y"}),headers:{"Content-Type":"application/json"}}).then((function(e){d().fire({title:"Thank You",text:"User Deleted",icon:"success"}).then((function(){_()}))})).catch((function(e){console.log("Err",e);var a="Somethhing went wrong, please try again.";e.data.errorMsg&&(a=e.data.errorMsg),d().fire({title:"Oops!",text:a,icon:"error"})}))}}))},V={sortName:C,sortOrder:F,onSortChange:function(e,a){console.info("onSortChange",arguments),D(e),q(a)}},G={All:"All",Expired:"Expired",Active:"Active",Inactive:"Inactive"};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"page-header",children:(0,b.jsx)("nav",{"aria-label":"breadcrumb",children:(0,b.jsxs)("ol",{className:"breadcrumb",children:[(0,b.jsx)("li",{className:"breadcrumb-item",children:(0,b.jsx)("a",{href:"!#",onClick:function(e){return e.preventDefault()},children:"Users"})}),(0,b.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:(0,b.jsxs)("h3",{className:"page-title",children:[(0,b.jsx)("i",{class:"fa-solid fa-user"})," User List "]})})]})})}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("div",{className:"card-body",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{marginBottom:"20px",display:"flex",gap:"10px"},children:[(0,b.jsx)("select",{value:T,onChange:function(e){var a=e.target.value;U(a),_(a)},className:"form-control",style:{width:"15%",marginRight:"39%"},children:Object.keys(G).map((function(e){return(0,b.jsx)("option",{value:e,children:G[e]},e)}))}),(0,b.jsx)("input",{type:"text",placeholder:"Search...",className:"form-control"})]}),(0,b.jsxs)(h.c8,{data:r,striped:!0,hover:!0,pagination:!0,options:V,children:[(0,b.jsx)(h.bY,{width:"50",isKey:!0,dataField:"id",dataFormat:function(e,a,r,i){return(0,b.jsx)("div",{children:i+1})},children:"Sl No"}),(0,b.jsx)(h.bY,{width:"120",dataField:"firstname",dataFormat:function(e,a){return a.firstname+" "+a.lastname},dataSort:!0,children:"Name"}),(0,b.jsx)(h.bY,{width:"120",dataField:"companyName",dataSort:!0,children:"Company Name"}),(0,b.jsx)(h.bY,{width:"250",dataField:"email",dataSort:!0,children:"Email"}),(0,b.jsx)(h.bY,{width:"100",dataField:"mobile",dataSort:!0,children:"Mobile"}),(0,b.jsx)(h.bY,{width:"140",dataField:"createdDate",dataFormat:function(e,a){return x()(e).format("MMM. DD,  YYYY")},dataSort:!0,children:"Create Date"}),(0,b.jsx)(h.bY,{width:"140",dataField:"subscriptionExpiredDate",dataFormat:function(e,a){return null!=e?x()(e).format("MMM. DD,  YYYY"):"No Active Plan"},dataSort:!0,children:"Subscription Expire Date"}),(0,b.jsx)(h.bY,{width:"100",dataField:"isActive",dataFormat:function(e,a){return(0,b.jsx)("label",{className:"Y"==a.isActive?"badge badge-success":"badge badge-danger",children:"Y"==a.isActive?"Active":"Inactive"})},dataSort:!0,children:"Status"}),(0,b.jsx)(h.bY,{width:"100",dataField:"",dataFormat:function(e,a){return a.uplineId>0?(0,b.jsxs)("div",{children:[(0,b.jsx)("i",{className:"bi bi-pencil-square",children:(0,b.jsx)("img",{src:n.Z,onClick:function(e){R(a)}})}),"\xa0\xa0\xa0",(0,b.jsx)("i",{className:"bi bi-pencil-square",children:(0,b.jsx)("img",{src:l.Z,onClick:function(e){O(a)}})})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("i",{className:"bi bi-pencil-square",children:(0,b.jsx)("img",{src:n.Z,onClick:function(e){R(a)}})}),"\xa0\xa0\xa0",(0,b.jsx)("i",{className:"bi bi-pencil-square",children:(0,b.jsx)("img",{src:l.Z,onClick:function(e){O(a)}})}),"\xa0\xa0\xa0",(0,b.jsx)("i",{className:"bi bi-pencil-square",children:(0,b.jsx)("img",{src:c,onClick:function(e){L.push("userSubscriptionList/".concat(a.id,"/").concat(a.firstname+" "+a.lastname))}})})]})},children:"Action"})]})]})})})}),(0,b.jsxs)(u.Z,{className:"customModal brandModal",bsSize:"md",show:j,onHide:function(e){g(!1)},children:[(0,b.jsx)(u.Z.Header,{closeButton:!0,className:"custmModlHead",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{children:"Update User "})," "]})}),(0,b.jsx)(u.Z.Body,{children:(0,b.jsx)(m.Z,{rowData:w,isAdmin:!1,modalSubmit:function(e){g(!1),_()}})})]})]})]})})}}}]);
//# sourceMappingURL=822.6b87893e.chunk.js.map